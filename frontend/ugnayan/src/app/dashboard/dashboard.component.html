<app-navbar></app-navbar>
<div class="dashboard-content section" id="dashboard">
    <div class="dashboard-header">
        <h1>Welcome to the Dashboard</h1>
    </div>
    <p class="church-message">Stay updated with church activities, contributions, and more!</p>

    <!-- Dashboard Widgets -->
    <div class="dashboard-widgets">

        <!-- Daily Verse Widget -->
        <div class="widget-card verse">
            <h3>Daily Verse</h3>
            <blockquote>{{ dashboardData?.daily_verse }}</blockquote>
        </div>

        <!-- Quick Stats Widget -->
        <div class="widget-card stats">
            <h3>Quick Stats</h3>
            <ul>
                <li>Total Attendance this Week: <strong>{{ dashboardData?.quick_stats?.total_attendance }}</strong></li>
                <li>Contributions This Month: <strong>â‚±{{ dashboardData?.quick_stats?.contributions_this_month }}</strong></li>
                <li>Upcoming Events: <strong>{{ dashboardData?.quick_stats?.upcoming_events }}</strong></li>
            </ul>
        </div>

        <!-- To-Do / Events Widget -->
        <div class="widget-card todo">
            <h3>Reminders</h3>
            <ul>
                <li *ngFor="let reminder of dashboardData?.reminders?.reminders">
                    <span>{{ reminder.icon }}</span>
                    {{ reminder.title }}
                </li>
            </ul>
        </div>

    </div>

    <!-- Announcements Section -->
    <div class="announcement-section">
        <h2>Church Announcements</h2>
        <div class="announcement-carousel">
            <div class="announcement-card" *ngFor="let announcement of dashboardData?.announcement?.announcements">
                <div class="announcement-icon">{{ announcement.icon }}</div>
                <h4>{{ announcement.title }}</h4>
                <p>{{ announcement.description }}</p>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" *ngIf="showModal">
        <div class="modal-content">
            <h2>UPDATE DASHBOARD</h2>
            <form [formGroup]="updateForm" (ngSubmit)="onSubmit()">
                <div class="form-group">
                    <label for="daily_verse">Daily Verse:</label>
                    <input type="text" id="daily_verse" formControlName="daily_verse">
                </div>

                <div class="form-group">
                    <h3>Quick Stats</h3>
                    <div formGroupName="quick_stats">
                        <div>
                            <label for="total_attendance">Total Attendance this Week:</label>
                            <input type="number" id="total_attendance" formControlName="total_attendance">
                        </div>
                        <div>
                            <label for="contributions_this_month">Contributions This Month:</label>
                            <input type="number" id="contributions_this_month" formControlName="contributions_this_month">
                        </div>
                        <div>
                            <label for="upcoming_events">Upcoming Events:</label>
                            <input type="number" id="upcoming_events" formControlName="upcoming_events">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <h3>Announcements</h3>
                    <div formArrayName="announcements">
                        <div *ngFor="let announcement of announcements.controls; let i=index" [formGroupName]="i">
                            <input type="text" formControlName="icon" placeholder="Icon">
                            <input type="text" formControlName="title" placeholder="Title">
                            <textarea formControlName="description" placeholder="Description"></textarea>
                            <button type="button" (click)="removeAnnouncement(i)">Remove</button>
                        </div>
                    </div>
                    <button type="button" (click)="addAnnouncement()">Add Announcement</button>
                </div>

                <div class="form-group">
                    <h3>Reminders</h3>
                    <div formArrayName="reminders">
                        <div *ngFor="let reminder of reminders.controls; let i=index" [formGroupName]="i">
                            <input type="text" formControlName="icon" placeholder="Icon">
                            <input type="text" formControlName="title" placeholder="Title">
                            <select formControlName="status">
                                <option value="pending">Pending</option>
                                <option value="upcoming">Upcoming</option>
                                <option value="completed">Completed</option>
                            </select>
                            <button type="button" (click)="removeReminder(i)">Remove</button>
                        </div>
                    </div>
                    <button type="button" (click)="addReminder()">Add Reminder</button>
                </div>

                <div class="modal-buttons">
                    <button type="submit">Save Changes</button>
                    <button type="button" (click)="closeModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Video Section -->
    <div class="video-tab">
        <h2>Video Library</h2>
        <h3>Featured Documentaries</h3>
        <div class="video-container">
            <div class="video-box">
                <iframe src="https://www.youtube.com/embed/z72L9vrgJso" allowfullscreen></iframe>
            </div>
            <div class="video-box">
                <iframe src="https://www.youtube.com/embed/JXmuekfqWxs" allowfullscreen></iframe>
            </div>
            <div class="video-box">
                <iframe src="https://www.youtube.com/embed/s5NVoSjubiA" allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <!-- Update Dashboard Button -->
    <div class="update-dashboard-section">
        <button class="update-btn" (click)="openUpdateModal()">UPDATE DASHBOARD</button>
    </div>
</div>

<footer>
    <p>
        <i class="fa fa-heart"></i>
        <strong>Lupon Ugnayan</strong> - Empowering communities through connection and collaboration.
    </p>
</footer>